<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // demo01
      // var a = 20
      // function fn() {
      //   console.log(this.a)
      // }
      // fn()

      // demo2
      // var a = 20
      // function fn() {
      //   function foo() {
      //     console.log(this.a)
      //   }
      //   foo()
      // }
      // fn()

      // demo3
      // var a = 20
      // var obj = {
      //   a: 10,
      //   c: this.a + 20,
      //   fn: function () {
      //     return this.a
      //   },
      // }

      // console.log(obj.c) // 40
      // console.log(obj.fn()) // 10

      // 为了能够准确判断，我们在函数内部使用严格模式，因为非严格模式会自动指向全局
      // function fn() {
      //   'use strict'
      //   console.log(this)
      // }

      // fn() // fn是调用者，独立调用 undefined
      // window.fn() // fn是调用者，被window所拥有

      // demo3 变题
      // 'use strict'
      // var a = 20
      // function foo() {
      //   var a = 1
      //   var obj = {
      //     a: 10,
      //     c: this.a + 20,
      //     fn: function () {
      //       return this.a
      //     },
      //   }
      //   return obj.c
      // }
      // console.log(foo()) // ？ 独立调用 this 为 undefined 所以这里会报错
      // console.log(window.foo()) // ? 上面报错了，这里不执行，这里应该是40

      // 巩固练习 回调函数铺垫1
      // var a = 20
      // var foo = {
      //   a: 10,
      //   getA: function () {
      //     return this.a
      //   },
      // }
      // console.log(foo.getA()) // 10

      // var test = foo.getA
      // console.log(test()) // 20

      // 巩固练习 回调函数铺垫2
      // var a = 20
      // function getA() {
      //   return this.a
      // }
      // var foo = {
      //   a: 10,
      //   getA: getA,
      // }
      // console.log(foo.getA()) // 10

      // 巩固练习 回调函数
      // function foo() {
      //   console.log(this.a)
      // }

      // function active(fn) {
      //   fn() // 真实调用者，为独立调用
      // }

      // var a = 20
      // var obj = {
      //   a: 10,
      //   getA: foo,
      // }

      // active(obj.getA) // 20
    </script>
  </body>
</html>
